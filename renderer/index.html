<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDKS İşleme Sistemi</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>PDKS Sistemi</h2>
                <p>Veri İşleme & Analiz</p>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-item active" data-page="dashboard">
                    <i data-lucide="home" class="nav-icon"></i>
                    <span class="nav-label">Ana Sayfa</span>
                </div>
                
                <div class="nav-item" data-page="personel">
                    <i data-lucide="users" class="nav-icon"></i>
                    <span class="nav-label">Personel Verileri</span>
                </div>
                
                
                
                        <div class="nav-item" data-page="rapor">
                            <i data-lucide="file-text" class="nav-icon"></i>
                            <span class="nav-label">Raporlar</span>
                        </div>
                        
                        <div class="nav-item" data-page="gecmis">
                            <i data-lucide="history" class="nav-icon"></i>
                            <span class="nav-label">Veri Geçmişi</span>
                        </div>
                
                <div class="nav-item" data-page="ayarlar">
                    <i data-lucide="settings" class="nav-icon"></i>
                    <span class="nav-label">Ayarlar</span>
                </div>
            </nav>
            
              <div class="sidebar-footer">
                <div class="dark-mode-section">
                    <div class="dark-mode-toggle">
                        <span class="theme-label light-label">Açık Tema</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="darkModeToggle">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="theme-label dark-label">Koyu Tema</span>
                    </div>
                </div>
                 <div class="nav-item" data-page="yardim">
                     <i data-lucide="help-circle" class="nav-icon"></i>
                     <span class="nav-label">Yardım</span>
                 </div>
              </div>
        </aside>

        <!-- Ana İçerik -->
        <main class="main-content">
            <!-- Dashboard Sayfası -->
            <div class="page active" id="dashboard-page">
            <header class="header">
                <h1>Ana Sayfa</h1>
            </header>

                <div class="content-card">
                <div class="file-section">
                    <div class="file-input-area" id="fileInputArea">
                        <i data-lucide="folder" class="file-icon-large"></i>
                        <h3>Excel Dosyasını Seçin</h3>
                        <p>PDKS verilerini içeren Excel dosyasını seçin</p>
                        <button class="btn btn-primary" id="selectFileBtn">
                            <i data-lucide="folder-open" class="btn-icon"></i>
                            Dosya Seç
                        </button>
                </div>

                <div class="selected-file" id="selectedFile" style="display: none;">
                    <div class="file-info">
                        <i data-lucide="file-text" class="file-icon"></i>
                        <div class="file-details">
                            <div class="file-name" id="fileName"></div>
                            <div class="file-path" id="filePath"></div>
                        </div>
                        <button class="btn btn-secondary" id="changeFileBtn">Değiştir</button>
                    </div>
                </div>
                </div>

                <div class="process-section" id="processSection" style="display: none;">
                    <button class="btn btn-success btn-sm" id="processBtn">
                        <i data-lucide="play" class="btn-icon"></i>
                        İşlemi Başlat
                    </button>
                </div>

            <div class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText">İşleniyor...</div>
                </div>
            </div>

            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="success-message">
                    <i data-lucide="check-circle" class="success-icon"></i>
                    <h3>İşlem Başarıyla Tamamlandı!</h3>
                    <div class="result-stats">
                        <div class="stat-item">
                            <span class="stat-label">Toplam Kayıt:</span>
                            <span class="stat-value" id="totalRecords">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Personel Sayısı:</span>
                            <span class="stat-value" id="personelCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Hata Sayısı:</span>
                            <span class="stat-value" id="errorCount">0</span>
                        </div>
                    </div>
                </div>



            </div>

            <div class="error-section" id="errorSection" style="display: none;">
                <div class="error-message">
                    <i data-lucide="x-circle" class="error-icon"></i>
                    <h3>Hata Oluştu!</h3>
                    <p id="errorMessage"></p>
                    <button class="btn btn-primary" id="retryBtn">
                        <i data-lucide="refresh-cw" class="btn-icon"></i>
                        Tekrar Dene
                    </button>
                </div>
            </div>

            <!-- Log Görüntüleme Alanı -->
            <div class="log-section" id="logSection" style="display: none;">
                <div class="log-header">
                    <div class="log-title">
                        <i data-lucide="terminal" class="log-icon"></i>
                        <h3>İşlem Logları</h3>
                    </div>
                    <button class="btn btn-secondary" id="closeLogBtn">
                        <i data-lucide="x" class="btn-icon"></i>
                        Kapat
                    </button>
                </div>
                <div class="log-content">
                    <div class="log-container" id="logContainer">
                        <div class="log-entry">
                            <span class="log-timestamp">[00:00:00]</span>
                            <span class="log-message">Log alanı hazırlanıyor...</span>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>

            <!-- Personel Verileri Sayfası -->
            <div class="page" id="personel-page">
                        <header class="header">
                            <i data-lucide="users" class="page-icon"></i>
                            <h1>Personel Verileri</h1>
                        </header>

                <div class="content-card">
                    <!-- Filtreler -->
                    <div class="filters-section">
                        <h3>Filtreler</h3>
                        <div class="filters-grid">
                            <div class="filter-group">
                                <label class="filter-label">Sicil No</label>
                                <select class="filter-select" id="sicilFilter">
                                    <option value="">Tüm Sicil Numaraları</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">Personel</label>
                                <select class="filter-select" id="personelFilter">
                                    <option value="">Tüm Personeller</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">Vardiya</label>
                                <select class="filter-select" id="vardiyaFilter">
                                    <option value="">Tüm Vardiyalar</option>
                                    <option value="V1">V1 (08:30-16:30)</option>
                                    <option value="V2">V2 (16:30-00:30)</option>
                                    <option value="V3">V3 (00:30-08:30)</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">Tarih</label>
                                <input type="date" class="filter-input" id="tarihFilter">
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label">Durum</label>
                                <select class="filter-select" id="durumFilter">
                                    <option value="">Tüm Durumlar</option>
                                    <option value="ok">Tamamlanan</option>
                                    <option value="eksik">Eksik</option>
                                    <option value="geçersiz">Geçersiz</option>
                                </select>
                            </div>
                        </div>
                    </div>

                            <!-- Veri Listesi -->
                            <div class="data-section">
                                <h3>Veri Listesi</h3>
                                <div class="data-table-container">
                                    <table class="data-table" id="dataTable">
                                        <thead>
                                            <tr>
                                                <th>Sicil No</th>
                                                <th>Personel</th>
                                                <th>Tarih</th>
                                                <th>Vardiya</th>
                                                <th>Giriş</th>
                                                <th>Çıkış</th>
                                                <th>Çalışma</th>
                                                <th>FM</th>
                                                <th>Durum</th>
                                            </tr>
                                        </thead>
                                        <tbody id="dataTableBody">
                                            <tr>
                                                <td colspan="9" style="text-align: center; padding: 40px; color: #7f8c8d;">
                                                    <i data-lucide="database" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                                                    Henüz veri yüklenmedi
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                </div>
            </div>





            <!-- Raporlar Sayfası -->
            <div class="page" id="rapor-page">
                <header class="header">
                    <i data-lucide="file-text" class="page-icon"></i>
                    <h1>Raporlar</h1>
                </header>

                <div class="content-card">
                    <!-- Rapor Kartları -->
                    <div class="reports-grid">
                        <div class="report-card" onclick="generateReport('personel-ozet')">
                            <div class="report-icon">
                                <i data-lucide="users"></i>
                            </div>
                            <div class="report-content">
                                <h3>Personel Özet Raporu</h3>
                                <p>Personel bazında çalışma süreleri ve fazla mesai özeti</p>
                            </div>
                            <div class="report-action">
                                <i data-lucide="download"></i>
                            </div>
                        </div>

                        <div class="report-card" onclick="generateReport('vardiya-analiz')">
                            <div class="report-icon">
                                <i data-lucide="clock"></i>
                            </div>
                            <div class="report-content">
                                <h3>Vardiya Analiz Raporu</h3>
                                <p>Vardiya bazında detaylı analiz ve karşılaştırma</p>
                            </div>
                            <div class="report-action">
                                <i data-lucide="download"></i>
                            </div>
                        </div>

                        <div class="report-card" onclick="generateReport('fm-raporu')">
                            <div class="report-icon">
                                <i data-lucide="trending-up"></i>
                            </div>
                            <div class="report-content">
                                <h3>Fazla Mesai Raporu</h3>
                                <p>Fazla mesai analizi ve trend raporu</p>
                            </div>
                            <div class="report-action">
                                <i data-lucide="download"></i>
                            </div>
                        </div>

                        <div class="report-card" onclick="generateReport('gunluk-ozet')">
                            <div class="report-icon">
                                <i data-lucide="calendar"></i>
                            </div>
                            <div class="report-content">
                                <h3>Günlük Özet Raporu</h3>
                                <p>Günlük bazında çalışma süreleri ve istatistikler</p>
                            </div>
                            <div class="report-action">
                                <i data-lucide="download"></i>
                            </div>
                        </div>

                        <div class="report-card" onclick="generateReport('hata-raporu')">
                            <div class="report-icon">
                                <i data-lucide="alert-triangle"></i>
                            </div>
                            <div class="report-content">
                                <h3>Hata Analiz Raporu</h3>
                                <p>Eksik ve hatalı kayıtların detaylı analizi</p>
                            </div>
                            <div class="report-action">
                                <i data-lucide="download"></i>
                            </div>
                        </div>

                        <div class="report-card" onclick="generateReport('tum-veriler')">
                            <div class="report-icon">
                                <i data-lucide="database"></i>
                            </div>
                            <div class="report-content">
                                <h3>Tüm Veriler</h3>
                                <p>İşlenmiş tüm verilerin Excel formatında dışa aktarımı</p>
                            </div>
                            <div class="report-action">
                                <i data-lucide="download"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Veri Geçmişi Sayfası -->
            <div class="page" id="gecmis-page">
                <header class="header">
                    <i data-lucide="history" class="page-icon"></i>
                    <h1>Veri Geçmişi</h1>
                </header>

                <div class="content-card">
                    <div class="history-controls">
                        <button class="btn btn-primary btn-sm" onclick="clearHistory()">
                            <i data-lucide="trash-2" class="btn-icon"></i>
                            Geçmişi Temizle
                        </button>
                    </div>

                    <div class="history-table-container">
                        <table class="history-table" id="historyTable">
                            <thead>
                                <tr>
                                    <th>Dosya Adı</th>
                                    <th>Tarih</th>
                                    <th>Toplam Kayıt</th>
                                    <th>Personel</th>
                                    <th>Hata</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <tr>
                                    <td colspan="6" style="text-align: center; padding: 40px; color: #7f8c8d;">
                                        <i data-lucide="history" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                                        Henüz veri geçmişi yok
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="page" id="ayarlar-page">
                <header class="header">
                    <i data-lucide="settings" class="page-icon"></i>
                    <h1>Ayarlar</h1>
                </header>
                <div class="content-card">
                    <div class="settings-container">
                        <form class="settings-form" id="mainSettingsForm">
                            <div class="settings-cards-container">
                                <div class="settings-card">
                                    <h3>Pinhuman Bağlantı Bilgileri</h3>
                                    <p class="settings-description">Pinhuman sistemi için temel bağlantı bilgileri.</p>
                                    
                                    <div class="form-group">
                                        <label for="userName">Kullanıcı Adı / TCKN</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i data-lucide="user"></i>
                                                </span>
                                            </div>
                                            <input type="text" class="form-control" id="userName" name="userName" placeholder="TCKN/Kullanıcı adınızı girin...">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="companyCode">Firma Kodu</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i data-lucide="building"></i>
                                                </span>
                                            </div>
                                            <input type="text" class="form-control" id="companyCode" name="companyCode" placeholder="Firma kodunu girin...">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="settings-card">
                                    <h3>Güvenlik Bilgileri</h3>
                                    <p class="settings-description">Şifre ve 2FA bilgileri.</p>
                                    
                                    <div class="form-group">
                                        <label for="password">Şifre</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i data-lucide="lock"></i>
                                                </span>
                                            </div>
                                            <input type="password" class="form-control" id="password" name="password" placeholder="Şifrenizi girin...">
                                            <div class="input-group-append">
                                                <button type="button" class="btn btn-outline-secondary" id="togglePassword">
                                                    <i data-lucide="eye" id="eyeIcon"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="totpSecret">TOTP Secret</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i data-lucide="key"></i>
                                                </span>
                                            </div>
                                            <input type="text" class="form-control" id="totpSecret" name="totpSecret" placeholder="TOTP secret kodunuzu girin...">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="settings-card">
                                    <h3>UI Ayarları</h3>
                                    <p class="settings-description">Arayüz tercihleri ve görünüm ayarları.</p>
                                    
                                    <div class="form-group">
                                        <label for="languageSelect">Dil</label>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    <i data-lucide="globe"></i>
                                                </span>
                                            </div>
                                            <select class="form-control" id="languageSelect" name="language">
                                                <option value="tr">Türkçe</option>
                                                <option value="en">English</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="autoSaveToggle">Otomatik Kaydet</label>
                                        <div class="toggle-container">
                                            <label class="toggle-switch">
                                                <input type="checkbox" id="autoSaveToggle" name="autoSave">
                                                <span class="toggle-slider"></span>
                                            </label>
                                            <span class="toggle-label">İşlemler otomatik olarak kaydedilsin</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-actions" style="text-align: center; margin-top: -50px;">
                                <button type="submit" class="btn btn-success btn-sm">
                                    <i data-lucide="save" class="btn-icon"></i>
                                    Ayarları Kaydet
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div class="page" id="yardim-page">
                <header class="header">
                    <i data-lucide="help-circle" class="page-icon"></i>
                    <h1>Yardım</h1>
                </header>
                <div class="content-card">
                    <div style="text-align: center; padding: 40px;">
                        <h3 style="color: white; margin-bottom: 20px;">Destek ve Yardım</h3>
                        <p style="color: #7f8c8d; margin-bottom: 30px;">
                            PDKS sistemi ile ilgili sorunlarınız için bizimle iletişime geçin.
                        </p>
                        <button class="btn btn-primary" id="helpMailBtn" onclick="openHelpMail()">
                            <i data-lucide="mail" class="btn-icon"></i>
                            Destek Maili Gönder
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
        <div class="footer-buttons">
            <button class="btn btn-sm btn-danger" id="logoutBtn">
                <i data-lucide="log-out" class="btn-icon"></i>
                Çıkış Yap
            </button>
            <button class="btn btn-sm btn-secondary" id="openFolderBtn">
                <i data-lucide="folder-open" class="btn-icon"></i>
                Klasörü Aç
            </button>
            <button class="btn btn-sm btn-primary" id="pinhumanBtn">
                <i data-lucide="upload" class="btn-icon"></i>
                Pinhuman'a Gönder
            </button>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
